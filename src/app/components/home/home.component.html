<app-navbar></app-navbar>
<div class="row">
	<div class="col s12">
		<h4>Proyectos creados <a class="btn-floating waves-effect waves-light red modal-trigger" data-target="modal1"><i class="material-icons">add</i></a></h4>
		 <!-- Modal Structure -->
		  <div id="modal1" class="modal">
		    <div class="modal-content">
		    	<div class="row">
		    		<div class="col s12">
		    			<h4>Crear un proyecto</h4>
		    			<hr>
		    		</div>
		    	</div>
				<div class="row">
				    <form class="col s12">
				      <div class="row">
				        <div class="input-field col s6">
				          <input #nombre placeholder="Nombre Proyecto" id="nombreproyecto" type="text" class="validate">
				          <label for="nombreproyecto">Nombre Proyecto</label>
				        </div>
				        <div class="input-field col s6">
				          <input #alias placeholder="Alias" id="alias" type="text" class="validate">
				          <label for="alias">Alias</label>
				        </div>
				      </div>
					  <div class="row">
					    <form class="col s12">
					      <div class="row">
					        <div class="input-field col s12">
					          <textarea #descripcion id="textarea1" class="materialize-textarea"></textarea>
					          <label for="textarea1">Descripción</label>
					        </div>
					      </div>
					    </form>
					  </div>
				      <div class="row">
				        <div class="input-field col s6">
				          <input #fecha_inicio placeholder="Fecha inicio" id="fechainicio" type="date" class="validate">
				          <label for="fechainicio">Fecha inicio</label>
				        </div>
				        <div class="input-field col s6">
				          <input #fecha_fin placeholder="Fecha fin" id="fechafin" type="date" class="validate">
				          <label for="fechafin">Fecha fin</label>
				        </div>
				      </div>					  
				      <div class="row">
				      	<h4>Usuario responsable</h4>
						  <div class="input-field col s12">
						    <select #responsable class="browser-default">
						      <option value="" disabled selected>Selecciona un responsable</option>
						      <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.nombre}}</option>
						    </select>
						  </div>
				      </div>
				    </form>
				  </div>
		    </div>
		    <div class="modal-footer">
		    	<hr>
		      <a class="modal-close waves-effect waves-green btn" (click)="registrarProyecto(nombre.value,alias.value,descripcion.value,fecha_inicio.value,fecha_fin.value,responsable.value)">Crear proyecto</a>
		    </div>
		  </div>		
		<hr>
	</div>	
</div>
	<div class="row">
    <div class="col s4" *ngFor="let proyect of proyectos">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">{{proyect.nombre}} - {{proyect.alias}}</span>
          <span class="helper-text">{{proyect.fecha_creacion}}</span>
          <p>{{proyect.descripcion}}</p>
        </div>
        <div class="card-action">
          <a class="modal-trigger" style="cursor: pointer;" (click)="abrirEditar(proyect)" data-target="modal2"><i class="material-icons" >edit</i>Editar</a>
          <a [routerLink]="['/verproyecto', proyect.id]"><i class="material-icons">search</i>Ver proyecto</a>
        </div>
      </div>
    </div>
</div>		
		 <!-- Modal Structure -->
		  <div id="modal2" class="modal" >
		    <div class="modal-content">
		    	<div class="row">
		    		<div class="col s12">
		    			<h4>Actualizar un proyecto</h4>
		    			<hr>
		    		</div>
		    	</div>
				<div class="row">
				    <form class="col s12" *ngIf="proyectSel !=null">
				      <div class="row">
				        <div class="input-field col s6">
				          <input #nombreactu [value]="proyectSel.nombre"  placeholder="Nombre Proyecto" id="nombreproyecto" type="text" class="validate">
				          <label for="nombreproyecto">Nombre Proyecto</label>
				        </div>
				        <div class="input-field col s6">
				          <input #aliasactu [value]="proyectSel.alias" placeholder="Alias" id="aliasactu" type="text" class="validate">
				          <label for="aliasactu">Alias</label>
				        </div>
				      </div>
					  <div class="row">
					    <form class="col s12">
					      <div class="row">
					        <div class="input-field col s12">
					          <textarea #descripcionactu [value]="proyectSel.descripcion" id="textarea1" class="materialize-textarea"></textarea>
					          <label for="textarea1">Descripción</label>
					        </div>
					      </div>
					    </form>
					  </div>
				      <div class="row">
				        <div class="input-field col s6">
				          <input #fecha_inicioactu [value]="proyectSel.fecha_inicio" placeholder="Fecha inicio" id="fechainicio" type="date" class="validate">
				          <label for="fechainicio">Fecha inicio</label>
				        </div>
				        <div class="input-field col s6">
				          <input #fecha_finactu [value]="proyectSel.fecha_fin" placeholder="Fecha fin" id="fechafin" type="date" class="validate">
				          <label for="fechafin">Fecha fin</label>
				        </div>
				      </div>					  
				      <div class="row">
				      	<h4>Usuario responsable</h4>
						  <div class="input-field col s12">
						    <select #responsableactu class="browser-default">
						      <option [value]="proyectSel.usuario_responsable" disabled selected>ID SEL : {{proyectSel.usuario_responsable}}</option>
						      <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.nombre}}</option>
						    </select>
						  </div>
				      </div>
				      <div class="modal-footer">
		    				<hr>
				      		<a class="modal-close waves-effect waves-green btn" (click)="updateProyecto(nombreactu.value,aliasactu.value,descripcionactu.value,fecha_inicioactu.value,fecha_finactu.value,responsableactu.value)">Actualizar proyecto</a>
		    			</div>

				    </form>
				  </div>
		    </div>

		  </div>	
